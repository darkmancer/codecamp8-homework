<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      //Exercise 1 การเขียน code
      function pow(x, n) {
        let result = 1;
        for (let i = 0; i < n; i++) {
          result *= x;
        }
        return result;
      }
      let x = prompt("x?", ""),
        n = prompt("n?", "");
      if (n <= 0) {
        alert(
          `Power ${n} is not supported, please enter an integer number greater than zero`
        );
      } else {
        alert(pow(x, n));
      }

      //Exercise 2 การสร้าง object
      const obj = {
        name: "student",
        age: 18,
        address: "Pathumtani",
        status: "single",
        int: 10,
      };

      //Exercise 3 computed
      //3.1
      const result = {};
      while (true) {
        let k = prompt("Enter key");
        if (k === "stop") break;

        let v = prompt("Enter value");
        if (v === "stop") break;

        result[k] = v;
      }
      console.log(result);

      //3.2
      const result2 = {};

      while (1) {
        let key = prompt("Enter fruit");
        if (key === "stop") break;

        let value = +prompt("Enter amount");
        if (value === "stop") break;

        if (value > 1) {
          key += "s";
          result[key] = value;
        } else {
          result[key] = value;
        }
      }

      console.log(result2);

      //Exercise 4 Object
      //4.1
      const objEmpty = {};
      objEmpty.name = "Sonter";
      objEmpty.surname = "Pakorn";
      objEmpty.name = "Boy";
      delete objEmpty.name;

      //4.2
      const user = {
        firstname: "chayapol",
        lastname: "siva",
        age: 25,
      };

      const isEmptyObject = (obj) => {
        let result = true;
        for (let key in obj) {
          result = false;
          break;
        }
        return result;
      };

      //4.3 >> answer : No error

      //4.4
      let salaries = {
        John: 100,
        Ann: 160,
        Pete: 130,
      };

      function sum(obj) {
        let result = 0;

        for (let k in obj) {
          result += obj[k];
        }
        return result;
      }

      console.log(sum(salaries));

      console.log(isEmptyObject(user));

      //4.5
      function multiplyNumberic(obj, times) {
        const result = { ...obj };

        for (let key in obj) {
          if (+obj[key]) result[key] = obj[key] * times;
        }
        return result;
      }

      multiplyNumberic(menu, 3);

      //Exercise 5
      //5.1
      let user = {
        name: "John",
        go: function () {
          alert(this.name);
        },
      }(user.go)(); // "John"

      //5.2
      function makeUser() {
        return {
          name: "John",
          ref: this,
        };
      }
      let user = makeUser();
      alert(user.ref.name); // '' (empty string)

      //5.3
      let calculator = {
        read: function () {
          this.num1 = +prompt("First Number");
          this.num2 = +prompt("Second Number");
        },

        sum: function () {
          return this.num1 + this.num2;
        },

        mul: function () {
          return this.num1 * this.num2;
        },
      };

      calculator.read();
      alert(calculator.sum());
      alert(calculator.mul());

      //5.4
      let ladder = {
        step: 0,
        up() {
          this.step++;
          return this;
        },
        down() {
          this.step--;
          return this;
        },
        showStep: function () {
          console.log(this.step);
          return this;
        },
      };

      ladder.up().up().up().showStep().up().up().down().showStep();

      //Exercise 6 Constructor
      //6.1
      function Calculator() {
        this.read = function () {
          this.num1 = +prompt("First Number");
          this.num2 = +prompt("Second Number");
        };

        this.sum = function () {
          return this.num1 + this.num2;
        };

        this.mul = function () {
          return this.num1 * this.num2;
        };
      }

      const calc = new Calculator();
      calc.read();
      calc.sum();

      //6.2
      function Accumulator(startingValue) {
        this.value = startingValue;

        this.read = function () {
          const input = +prompt("Enter value");
          this.value += input;
          return this;
        };
      }

      const acc = new Accumulator(5);

      //Exercise 7 Number
      //Answer
      Math.floor(Math.random() * (max - min)) + min;

      //Exercise 8 String
      //8.1
      function ucFirst(string) {
        if (!string) return string;
        let result;

        result = string.slice(0, 1).toUpperCase() + string.slice(1);

        return result;
      }

      //8.2
      function checkSpam(string) {
        if (typeof string !== "string") return "Require input string";

        checkedString = string.toLowerCase();
        return (
          checkedString.includes("xxx") || checkedString.includes("viagra")
        );
      }

      //8.3
      function truncate(str, maxlength) {
        if (str.length > maxlength) {
          return str.slice(0, maxlength) + "...";
        } else {
          return str;
        }
      }

      console.log(
        truncate(
          "Lorem ipsum dolor sit amet consectetur adipisicing elit. Delectus, placeat.",
          20
        )
      );

      //8.4
      function extractCurrency(string, rate) {
        return +string.slice(1) * rate;
      }

      console.log(extractCurrency("$180", 32));

      //Exercise 9 Array
      // 9.1
      let fruits = ["Apples", "Pear", "Orange"];

      let shoppingCart = fruits;
      shoppingCart.push("Banana");

      console.log(fruits.length); // answer 4

      //9.2
      const styles = ["Jazz", "Blues"];
      styles.push("Rock-n-Roll");
      styles.splice(1, 1, "Classic");
      styles.shift(1);
      styles.unshift("Rap", "Reggae");
      console.log(styles);

      //9.3
      const sumInput = () => {
        const inputs = [];
        while (1) {
          const newValue = Number(prompt("Enter Value"));
          if (
            !newValue ||
            newValue !== 0 ||
            newValue === null ||
            newValue.trim() === ""
          )
            break;
          inputs.push(newValue);
        }
        let sum = 0;
        inputs.forEach((value) => {
          sum += value;
        });
        console.log(sum);
      };

      //Exercise 10 Methods array
      //10.1.1
      const array1 = [1, 2, 30, 400];
      const array2 = array1.map((item) => item * 2);
      console.log(array2);

      //10.1.2
      const array1 = [1, 2, 3, 4];
      const array2 = array1.map((item) => String(item));
      console.log(array2);

      //10.1.3
      const array1 = [1, "1", 2, {}];
      const array2 = array1.map((item) => typeof item);
      console.log(array2);

      //10.1.4
      const array1 = ["apple", "banana", "orange"];
      const array2 = array1.map((item) => item.toUpperCase());
      console.log(array2);

      //10.1.5
      const array1 = [
        { name: "apple", age: 14 },
        { name: "banana", age: 18 },
        { name: "watermelon", age: 32 },
      ];
      const array2 = array1.map((item) => item.name);
      console.log(array2);

      //10.1.6
      const array1 = [
        { name: "apple", age: 14 },
        { name: "banana", age: 18 },
        { name: "watermelon", age: 32 },
      ];
      const array2 = array1.map((item) => item.age);
      console.log(array2);

      //10.1.7
      const array1 = [
        { name: "apple", surname: "London" },
        { name: "banana", surname: "Bangkok" },
        { name: "watermelon", surname: "Singapore" },
      ];
      const array2 = array1.map((item) => item.name + " " + item.surname);
      const array2 = array1.map((item) => `${item.name} ${item.surname}`);
      อีกวิธี;
      console.log(array2);

      // 10.1.8
      const array1 = [1, 3, 4, 5, 6, 7, 8];
      const array2 = array1.map((item) => {
        if (item % 2 === 0) {
          return "even";
        } else {
          return "odd";
        }
      });
      console.log(array2);

      //10.1.9
      const array1 = [1, -3, 2, 8, -4, 5];
      const array2 = array1.map((item) => {
        if (item < 0) return item * -1;
        return item;
      });
      console.log(array2);

      // 10.1.10
      const array1 = [100, 200.25, 300.84, 400.3];
      const array2 = array1.map((item) => item.toFixed(2));
      console.log(array2);

      //10.1.11
      const array1 = [
        { name: "apple", birth: "2000-01-01" },
        { name: "banana", birth: "1990-10-01" },
        { name: "watermelon", birth: "1985-12-01" },
      ];
      const array2 = array1.map((item) => {
        const birth = new Date(item.birth);
        const now = new Date();

        let age;
        if (now.getMonth < birth.getMonth) {
          age = now.getFullyear() - birth.getFullyear() - 1;
        } else if (now.getMonth > birth.getMonth) {
          age = now.getFullyear() - birth.getFullyear();
        } else {
          if (now.getDate < birth.getDate) {
            age = now.getFullyear() - birth.getFullyear() - 1;
          } else {
            age = now.getFullyear() - birth.getFullyear();
          }
        }

        return {
          ...item,
          age: now.getFullYear() - birth.getFullYear(),
        };
      });
      console.log(array2);

      //10.1.12
      const now = new Date();
      const mapMonth = [
        "Jan",
        "Feb",
        "Mar",
        "Apr",
        "May",
        "June",
        "July",
        "Aug",
        "Sep",
        "Oct",
        "Nov",
        "Dec",
      ];
      console.log(now.toLocaleString("default"));
      console.log(
        now.toLocaleString("default", { month: "short" }).toLowerCase()
      );

      const array1 = [
        { name: "apple", birth: "2000-01-01" },
        { name: "banana", birth: "1990-10-01" },
        { name: "watermelon", birth: "1985-12-01" },
      ];
      const array2 = array1.map((item) => {
        const birth = new Date(item.birth);
        return `<tr><td>${
          item.name
        }</td><td>${birth.getDate()} ${birth.toLocaleString("default", {
          month: "short",
        })} ${birth.getFullYear()}</td></tr>`;
      });
      console.log(array2);

      //10.2.1
      const array1 = [1, 2, 30, 400];
      const array2 = array1.filter((item) => item > 10);
      console.log(array2);

      //10.2.2
      const array1 = [1, 2, 3, 4];
      const array2 = array1.filter((item) => item % 2 === 1);
      console.log(array2);

      //10.2.3
      const array1 = [1, "1", 2, {}];
      const array2 = array1.filter((item) => {
        if (typeof item === "number") return item;
      });
      console.log(array2);

      //10.2.4
      const array1 = ["apple", "banana", "orange", "pineapple", "watermelon"];
      const array2 = array1.filter((item) => item.length > 6);
      console.log(array2);

      //10.2.5
      const array1 = [
        { name: "apple", age: 14 },
        { name: "banana", age: 18 },
        { name: "watermelon", age: 32 },
        { name: "pineapple", age: 16 },
        { name: "peach", age: 24 },
      ];
      const array2 = array1.filter((item) => item.age < 18);
      console.log(array2);

      //10.2.6
      const array1 = [
        { name: "apple", age: 14 },
        { name: "banana", age: 18 },
        { name: "watermelon", age: 32 },
        { name: "pineapple", age: 16 },
        { name: "peach", age: 24 },
      ];
      const array2 = array1.filter((item) => item.age !== 32);
      console.log(array2);

      //10.2.7
      const array1 = [1, -3, 2, 8, -4, 5];
      const array2 = array1.filter((item) => item > 0);
      console.log(array2);

      //10.2.8
      const array1 = [1, 3, 4, 5, 6, 7, 8];
      const array2 = array1.filter((item) => item % 3 === 0);
      console.log(array2);

      //10.2.9
      const array1 = ["peach", 1, -3, "2", {}, []];
      const array2 = array1.filter((item) => typeof item === "string");
      console.log(array2);

      //10.2.10
      const array1 = ["APPLE", "aPPLE", "PEACH", "PEach"];
      const array2 = array1.filter((item) => item === item.toUpperCase(item));
      console.log(array2);

      //10.2.11
      const array1 = [
        { name: "apple", birth: "2000-01-01" },
        { name: "banana", birth: "1990-10-01" },
        { name: "watermelon", birth: "1985-12-01" },
      ];
      const array2 = array1.filter((item) => {
        if (Number(item.birth.substring(5, 7)) === 10) {
          return item;
        }
      });
      console.log(array2);

      //10.2.12
      const array1 = [
        { name: "apple", birth: "2000-01-01" },
        { name: "banana", birth: "1990-10-01" },
        { name: "watermelon", birth: "1985-12-01" },
      ];
      const array2 = array1.filter((item) => {
        if (Number(item.birth.substring(0, 4)) < 2000) {
          return item;
        }
      });
      console.log(array2);

      //Exercise 11 Map, set
      //11.1
      function unique(arr) {
        let uni = new Set();
        for (let value of arr) {
          uni = set.add(value);
        }
        return uni;
      }

      let values = [
        "Hare",
        "Krishna",
        "Hare",
        "Krishna",
        "Krishna",
        "Krishna",
        "Hare",
        "Hare",
        ":-0",
      ];

      console.log(unique(values));

      //11.3
      let map = new Map();

      let keys = map.keys();
      let vals = map.values();
      let ents = map.entries();

      const conArr = Array.from(keys);
      const conValsArr = Array.from(vals);
      const conEnt = Array.from(ents);
      console.log(conEnt);

      const resultCon = [...conArr, ...conValsArr];
      resultCon.push("more");
      console.log(resultCon);

      //Exercise 12 key, value, entities
      //12.1
      let salaries = {
        John: 100,
        Pete: 300,
        Mary: 250,
      };

      const valSalaries = Object.values(salaries);

      let sum = 0;
      sum = valSalaries.reduce((acc, item) => acc + item, 0);

      console.log(sum);

      //12.2
      let user = {
        name: "John",
        age: 30,
      };
      console.log(Object.keys(user).length);
    </script>
  </body>
</html>
